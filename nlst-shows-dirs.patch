diff -ruN wu-ftpd-2.6.1.orig/config.h.in wu-ftpd-2.6.1/config.h.in
--- wu-ftpd-2.6.1.orig/config.h.in	Sun Dec  3 19:48:14 2000
+++ wu-ftpd-2.6.1/config.h.in	Sun Dec  3 19:50:33 2000
@@ -344,6 +344,15 @@
  */
 #undef QUOTA
 
+/*
+ * Define this to revert the NLST command to showing directories.
+ *
+ * This will cause mget to have errors when it attempts to RETR the
+ * directory name (which is not a RETRievable object) but will revert
+ * the NLST command enough to quell complains from Solaris command-
+ * line FTP client users.
+ */
+#undef NLST_SHOWS_DIRS
 
 /*
  * IPv6
diff -ruN wu-ftpd-2.6.1.orig/config.h.noac wu-ftpd-2.6.1/config.h.noac
--- wu-ftpd-2.6.1.orig/config.h.noac	Sat Jul  1 19:42:15 2000
+++ wu-ftpd-2.6.1/config.h.noac	Sun Dec  3 19:49:18 2000
@@ -378,3 +378,13 @@
  * CONSUMES ALL AVAILABLE MEMORY.
  */
 #undef SITE_NEWER
+
+/*
+ * Define this to revert the NLST command to showing directories.
+ *
+ * This will cause mget to have errors when it attempts to RETR the
+ * directory name (which is not a RETRievable object) but will revert
+ * the NLST command enough to quell complains from Solaris command-
+ * line FTP client users.
+ */
+#undef NLST_SHOWS_DIRS
diff -ruN wu-ftpd-2.6.1.orig/configure.in wu-ftpd-2.6.1/configure.in
--- wu-ftpd-2.6.1.orig/configure.in	Sun Dec  3 19:48:14 2000
+++ wu-ftpd-2.6.1/configure.in	Sun Dec  3 19:49:18 2000
@@ -202,6 +202,8 @@
 	[ bufsize=$withval ], [ bufsize=no ])
 AC_ARG_WITH(backlog,	 [  --with-backlog=x        number of incoming processes to backlog in daemon mode],
 	[ backlog=$withval ], [ backlog=100 ])
+AC_ARG_ENABLE(nlst-dirs, [  --enable-nlst-dirs      allow NLST to show directories, can break mget],
+	[ nlstdirs=$enableval ], [ nlstdirs=no ])
 
 LIBS=""
 
@@ -1158,6 +1160,9 @@
 fi
 if test $badclients = yes; then
 	AC_DEFINE(SUPPORT_BROKEN_CLIENTS)
+fi
+if test $nlstdirs = yes; then
+	AC_DEFINE(NLST_SHOWS_DIRS)
 fi
 
 dnl TODO:is there a better check whether or not an argument is numeric???
diff -ruN wu-ftpd-2.6.1.orig/src/ftpd.c wu-ftpd-2.6.1/src/ftpd.c
--- wu-ftpd-2.6.1.orig/src/ftpd.c	Sun Dec  3 19:48:14 2000
+++ wu-ftpd-2.6.1/src/ftpd.c	Sun Dec  3 19:49:18 2000
@@ -6975,7 +6975,10 @@
 	    }
 	    goto globfree;
 	}
-	if ((st.st_mode & S_IFMT) != S_IFDIR) {
+#ifndef NLST_SHOWS_DIRS
+	if ((st.st_mode & S_IFMT) != S_IFDIR)
+#endif
+	{
 	    if (dout == NULL) {
 		dout = dataconn("file list", (off_t) - 1, "w");
 		if (dout == NULL)
